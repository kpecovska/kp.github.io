<!doctype html>
<html>
  <head>
    
    <!-- GTM Datalayer init-->
    <script>
    window.dataLayer = window.dataLayer || [];
    </script> -->
    
    <!-- Google Tag Manager -->
      <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-WRKRQ3R');</script>
    <!-- End Google Tag Manager -->
    
    <title>Template events test page</title>

    <script>

</script>
  </head>
  <body>
    
    <!-- Google Tag Manager (noscript) --
      <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WRKRQ3R"
      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    !-- End Google Tag Manager (noscript) -->
    
    <h1>Template events test page</h1>
    <h2>Send any template event:</h2>
    
    <hr>   
    
    <h2>  1. Added to cart event:</h2>
    <form class="added-to-cart-form">
      <div align="right">
        <label for="itemId1">Item Id [text]: </label>
        <input type="text" name="itemId1" required>
      </div>
      <div  align="right">
        <label for="amount1">Amount [number]: </label>
        <input type="number" name="amount1" min="1" required>
      </div>
       <div>
        <label align="right" for="price1">Price [number]: </label>
        <input type="number" name="price1" required>
      </div>
      <div>
        <input type="submit" value="added To Cart Submit">
      </div>
    </form>
    
    <hr>
    
    <h2>  2. Added to Favourites event: </h2>
    <form class="added-to-favourites-form">
      <div>
        <label for="itemId2">Item Id [text]: </label>
        <input type="text" name="itemId2" required>
      </div>
      <div>
        <input type="submit" value="added To Favourites Submit">
      </div>
    </form>
    
    <hr>
    
    <h2>  3. Item Purchased event: </h2>
     <form class="item-purchased-form">
      <div align="right">
        <label for="itemId3">Item Id [text]: </label>
        <input type="text" name="itemId3" required>
      </div>
      <div align="right">
        <label for="amount3">Amount [number]: </label>
        <input type="number" name="amount3" min="1" required>
      </div>
      <div>
        <label align="right" for="price3">Price [number]: </label>
        <input type="number" name="price3" required>
      </div>
      <div>
        <label align="right" for="profit">Profit [number]: </label>
        <input type="number" name="profit" required>
      </div>
      <div>
        <input type="submit" value="item Purchased Submit">
      </div>
    </form>
    
        <hr>
    
    <h2>  4. Item Viewed event: </h2>
     <form class="item-viewed-form">
      <div align="right">
        <label for="itemId4">Item Id [text]: </label>
        <input type="text" name="itemId4" required>
      </div>
      <div align="right">
        <label for="duration">Duration [number]: </label>
        <input type="number" name="duration" required>
      </div>
      <div>
        <input type="submit" value="item Viewed Submit">
      </div>
    </form>
    
            <hr>
    
    <h2>  5. Rating Added event: </h2>
     <form class="rating-added-form">
      <div align="right">
        <label for="itemId5">Item Id [text]: </label>
        <input type="text" name="itemId5" required>
      </div>
      <div align="right">
        <label for="rating">Rating [number between <-1, 1>]: </label>
        <input type="number" name="rating" required>
      </div>
      <div>
        <input type="submit" value="rating Added Submit">
      </div>
    </form>
       
                <hr>
    
    <h2>  6. View Portion Set event: </h2>
     <form class="view-portion-set-form">
      <div align="right">
        <label for="itemId6">Item Id [text]: </label>
        <input type="text" name="itemId6" required>
      </div>
      <div align="right">
        <label for="portion">Portion [number between <0, 1> ... nothing viewed / all viewed]: </label>
        <input type="number" name="portion" required>
      </div>
      <div align="right">
        <label for="sessionId">SessionId [text]: </label>
        <input type="text" name="sessionId" required>
      </div>
      <div>
        <input type="submit" value="View Portion Set Submit">
      </div>
    </form>
    
        <hr>
        <hr>
    
    <button  class="button-register" onclick="goToWebSDK()" type="button">
       Go to Login page
    </button>

     <script>
      const onAddedToCartSubmit = (evt) => {
        evt.preventDefault();
        const formData = new FormData(document.querySelector('.added-to-cart-form'));
        const formItem1 = formData.get('itemId1');
        const formAmount1 = formData.get('amount1');
        const formPrice1 = formData.get('price1');
        window.dataLayer.push({'itemId': formItem1, 'amount': formAmount1,'price': formPrice1, 'event': 'addedToCart'});
        console.log('Added to cart');
      };
       
      const onAddedToFavouritesSubmit = (evt) => {
        evt.preventDefault();
        const formData = new FormData(document.querySelector('.added-to-favourites-form'));
        const formItem2 = formData.get('itemId2');
        window.dataLayer.push({'itemId': formItem2, 'event': 'addedToFavourites'});
        console.log('Added to Favourites');
      };
       
      const onItemPurchasedSubmit = (evt) => {
        evt.preventDefault();
        const formData = new FormData(document.querySelector('.item-purchased-form'));
        const formItem3 = formData.get('itemId3');
        const formAmount3 = formData.get('amount3');
        const formPrice3 = formData.get('price3');
        const formProfit = formData.get('profit');
        window.dataLayer.push({'itemId': formItem3, 'amount': formAmount3,'price': formPrice3, 'profit': formProfit, 'event': 'itemPurchased'});
        console.log('Item purchased');
      };
       
      const onItemViewedSubmit = (evt) => {
        evt.preventDefault();
        const formData = new FormData(document.querySelector('.item-viewed-form'));
        const formItem4 = formData.get('itemId4');
        const formDuration = formData.get('duration');
        window.dataLayer.push({'itemId': formItem4, 'duration': formDuration, 'event': 'itemViewed'});
        console.log('Item viewed');
      };
       
       const onRatingAddedSubmit = (evt) => {
        evt.preventDefault();
        const formData = new FormData(document.querySelector('.rating-added-form'));
        const formItem5 = formData.get('itemId5');
        const formRating = formData.get('rating');
        window.dataLayer.push({'itemId': formItem5, 'rating': formRating, 'event': 'ratingAdded'});
        console.log('Rating added');
      };
       
      const onViewPortionSetSubmit = (evt) => {
        evt.preventDefault();
        const formData = new FormData(document.querySelector('.view-portion-set-form'));
        const formItem6 = formData.get('itemId6');
        const formPortion = formData.get('portion');
        const formSessionId = formData.get('sessionId');
        window.dataLayer.push({'itemId': formItem6, 'portion': formPortion, 'sessionId': formSessionId, 'event': 'viewPortionSet'});
        console.log('View portion set');
      };

      const addedToCartForm = document.querySelector('.added-to-cart');
      addedToCartForm.addEventListener('submit', onAddedToCartSubmit);
      const addedToFavForm = document.querySelector('.added-to-favourites');
      addedToFavForm.addEventListener('submit', onAddedToFavouritesSubmit);
      const itemPurchasedForm = document.querySelector('.item-purchased-form');
      itemPurchasedForm.addEventListener('submit', onItemPurchasedSubmit);
      const itemViewedForm = document.querySelector('.item-viewed-form');
      itemViewedForm.addEventListener('submit', onItemViewedSubmit);
      const ratingAddedForm = document.querySelector('.rating-added-form');
      ratingAddedForm.addEventListener('submit', onRatingAddedSubmit);
      const viewPortionSetForm = document.querySelector('.vew-portion-set-form');
      viewPortionSetForm.addEventListener('submit', onViewPortionSetSubmit);

         function goToWebSDK() {
        window.location = './index.html';
         }
       
    </script>
    
   
  </body>
</html>
