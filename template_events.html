<!doctype html>
<html>
  <head>
    
    <!-- GTM Datalayer init-->
    <script>
    window.dataLayer = window.dataLayer || [];
    </script> -->
    
    <!-- Google Tag Manager -->
      <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-WRKRQ3R');</script>
    <!-- End Google Tag Manager -->
    
    <title>Template events test page</title>

    <script>

</script>
  </head>
  <body>
    
    <!-- Google Tag Manager (noscript) --
      <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WRKRQ3R"
      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    !-- End Google Tag Manager (noscript) -->
    
    <h1>Template events test page</h1>
    <h2>Send any template event:</h2>
    
    <hr>   
    
    <h2>Added to cart event:</h2>
    <form class="added-to-cart">
       <div>
        <label align="right" for="itemId1">Item Id [text]: </label>
        <input type="text" id="itemId1" required>
      </div>
      <div>
        <label align="right" for="amount1">Amount [number]: </label>
        <input type="number" id="amount1" min="1" required>
      </div>
       <div>
        <label align="right" for="price1">Price [number]: </label>
        <input type="number" id="price1" required>
      </div>
      <div>
        <input type="submit" value="addedToChartSubmit">
      </div>
    </form>
    
    <hr>
    
    <h2>Added to Favourites: --- TBD</h2>
    <form class="added-to-favourites">
      <div>
        <label align="right" for="itemId2">Item Id [text]: </label>
        <input type="text" id="property" required>
      </div>
      <div>
        <label align="right" for="lastName">Your Last name: </label>
        <input type="text" lastName="property" id="lastName" required>
      </div>
      <div>
        <input type="submit" value="Update Profile">
      </div>
    </form>
    
    <hr>
    
    <h2>Send event form: --- TBD</h2>
     <form class="event-form">
       <div>
        <label for="product">Product Name: </label>
        <input type="text" name="product" id="product" required>
      </div>
       <div>
        <label for="product_qty">Quantity: </label>
        <input type="text" name="product" id="product_qty" required>
      </div>
      <div>
        <input type="submit" value="Send Event">
      </div>
    </form>
    
        <hr>
    <button  class="button-register" onclick="goToWebSDK()" type="button">
       Go to Login page
    </button>

     <script>
      const onAddedToCartSubmit = (evt) => {
        evt.preventDefault();
        const formData = new FormData(document.querySelector('.added-to-cart'));
        const formItem1 = formData.get('itemId1');
        const formAmount1 = formData.get('amount1');
        const formPrice1 = formData.get('price1');
        window.dataLayer.push({'event': 'addedToCart', 'itemId': 'formItem1', 'amount': 'formAmount1','price': 'formPrice1'});
        console.log('Added to cart');
      };
       
      const onSendClick = (evt) => {
        evt.preventDefault();
        const formData = new FormData(document.querySelector('.event-form'));
        const formProduct = formData.get('product');
        window.dataLayer.push({'product_name': formProduct, 'event': 'send_event'});
        console.log('Sent Event');
      };
       
       const onUpdateClick = (evt) => {
        evt.preventDefault();
        const formData = new FormData(document.querySelector('.profile-form'));
        const formProp = formData.get('property');
        window.dataLayer.push({'attr_value': formProp, 'event': 'update_profile'});
        console.log('Updated Profile');
      };

      const addedToCartForm = document.querySelector('.added-to-cart');
      addedToCartForm.addEventListener('submit', onAddedToCartSubmit);
      const profileForm = document.querySelector('.profile-form');
      profileForm.addEventListener('submit', onUpdateClick);
      const eventForm = document.querySelector('.event-form');
      eventForm.addEventListener('submit', onSendClick);

         function goToWebSDK() {
        window.location = './index.html';
         }
       
    </script>
    
   
  </body>
</html>
